---
title: "[JS] What's new in ECMAScript 2020"
date: 2020-05-23 16:21:13
category: 'JS'
---

<br>

![img](./images/es11.png)

2020ë…„ì„ ë§ì´ í•˜ê¸°ì—ëŠ” ë²Œì¨ 5ì›”ì´ ëë‚˜ê³  ìˆì§€ë§Œ ê·¸ë˜ë„ ì˜¬í•´ ë‚˜ì˜¨ ES2020 ì— ìƒˆë¡œìš´ ê¸°ëŠ¥ì„ ì‚´í´ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.

2015ë…„ ES6 ì´í›„ë¡œ Ecma Internationalì˜ TC39ì—ì„œ ë§¤ë…„ ECMAScriptì˜ ìƒˆë¡œìš´ ë²„ì „ì„ ì¶œì‹œí•©ë‹ˆë‹¤. ECMAScript 2020ì€ ECMAScript ì–¸ì–´ 11 ë²ˆì§¸ ë²„ì „ì…ë‹ˆë‹¤.

ES11 ë˜ëŠ” ES2020 ì´ë¼ê³ ë„ ë¶€ë¦…ë‹ˆë‹¤.

## What?

ìƒˆë¡­ê²Œ ì ìš©ëœ ê¸°ëŠ¥ì¸ ì•„ë˜ì™€ ê°™ìŠµë‹ˆë‹¤.

- globalThis
- Promise.allSettled
- Optional Chaining Operator
- Nullish Coalescing
- Dynamic Import
- BigInt
- String.prototype.matchAll

## globalThis

globalThisëŠ” Javascriptì˜ ìµœìƒìœ„ ê°ì²´ì¸ global ê°ì²´ì— ì ‘ê·¼í•˜ê¸° ìœ„í•´ ES2020ì—ì„œ ì¶”ê°€ëœ ë°©ì‹ì…ë‹ˆë‹¤.
ìµœìƒìœ„ ê°ì²´ë¼ë©´ ë¸Œë¼ìš°ì €ì—ì„œëŠ” window ê°ì²´ë¥¼ ì˜ë¯¸í•˜ê³ ,

Node.js ì—ì„œëŠ” global ê°ì²´ë¥¼ ì˜ë¯¸í•©ë‹ˆë‹¤.

JSê°€ ì‹¤í–‰ë˜ëŠ” ëŸ°íƒ€ì„ í™˜ê²½ì´ ë‹¬ë¼ì§€ê²Œ ë˜ë©´ ì ‘ê·¼í•˜ëŠ” ë°©ì‹ì´ ë‹¬ë¼ì ¸ì„œ ë¶ˆí¸í•˜ê¸° ë•Œë¬¸ì— globalThisì´ë¼ëŠ” ê³µí†µê°ì²´ë¥¼ ì‚¬ìš©í•˜ì—¬ ë™ì¼í•˜ê²Œ ì ‘ê·¼ì„ í•  ìˆ˜ê°€ ìˆê²Œ ë©ë‹ˆë‹¤.

```ts
//ë¸Œë¼ìš°ì € ì‹¤í–‰ í™˜ê²½ ê¸°ì¤€
globalThis === window // true;
//Node ì‹¤í–‰ í™˜ê²½ ê¸°ì¤€
globalThis === global // true;
```

## Promise.allSettled

ìˆœì°¨ì ì´ì§€ ì•Šì€ ë¹„ë™ê¸°ì ì¸ ì‘ì—…ì„ ìˆ˜í–‰ í•  ë•Œ es6ì— ë“±ì¥í•œ Promise.allë¥¼ ì‚¬ìš©í–ˆì„í…ë°
í•˜ì§€ë§Œ ê²°ì •ì ì¸ ë‹¨ì ì´ í•˜ë‚˜ë¼ë„ rejectë¡œ ë–¨ì–´ì§„ë‹¤ë©´ ë‹¤ë¥¸ ë‚˜ë¨¸ì§€ ìˆ˜í–‰ì´ ê²°ê³¼ê°’ì„ ì²˜ë¦¬ í•  ìˆ˜ ì—†ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.

```ts
const A = new Promise((resolve, reject) => setTimeout(resolve, 500, 'success'))
const B = new Promise((resolve, reject) => setTimeout(reject, 500, 'fail'))
const C = new Promise((resolve, reject) => setTimeout(resolve, 500, 'success'))

const pArray = [A, B, C]
/* Promise.all */
Promise.all(pArray)
  .then(results => {
    console.log(results)
  })
  .catch(err => {
    console.error(err)
  })
```

ìœ„ì— ê²°ê³¼ëŠ” ì–´ë–»ê²Œ ë‚˜ì˜¬ê¹Œìš”?
A ì™€ C ëŠ” success ì§€ë§Œ Bê°€ fail ì´ê¸°ë•Œë¬¸ì— ê²°ê³¼ëŠ” catch ë¡œ ë¹ ì§€ê²Œ ë˜ì–´ reject fail ë¡œ ì²˜ë¦¬ê°€ ë©ë‹ˆë‹¤.
ì´ê²ƒì„ ë°©ì§€í•˜ê¸° ìœ„í•´ì„œ Promise.allSettled ê°€ ë‚˜ì™”ìŠµë‹ˆë‹¤.

**Promise.allSettled** ì‚¬ìš©í•˜ë©´

```ts
//...ìœ„ì™€ ì¡°ê±´ì€ ë˜‘ê°™ë‹¤
/* Promise.all */
Promise.allSettled(pArray)
  .then(results => {
    console.log(results)
  })
  .catch(err => {
    console.error(err)
  })
```

![img](./images/allSettled.png)

> ì„±ê³µí•œ ê²½ìš° statusëŠ” fulfilledë¡œ, ë°˜í™˜ê°’ì€ valueë¡œ ë‚˜ì˜¤ê³ , ì‹¤íŒ¨í•œ ê²½ìš°ì—ëŠ” statusëŠ” rejected, ë°˜í™˜ê°’ì€ reasonìœ¼ë¡œ ë‚˜ì˜µë‹ˆë‹¤. ì‹¤íŒ¨í•œ Promiseë§Œ ì¶”ë ¤ì„œ ì¬ìš”ì²­í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

## Optional Chaining(?.)

ì„ íƒì  ì²´ì´ë‹(?.)

### What

Optional Chaining(?.) ì—°ì‚°ìëŠ” ì™¼ìª½ í”¼ì—°ì‚°ì ê°’ì´ nullì´ë‚˜ undefinedì¼ ê²½ìš° ì‹¤í–‰ì„ ë©ˆì¶”ê³  undefinedë¥¼ ë°˜í™˜í•˜ëŠ” ì—°ì‚°ìì…ë‹ˆë‹¤

```js
const data = {
  user: {
    name: 'song',
    getName() {
      return this.name
    },
  },
}

// ì˜µì…”ë„ ì²´ì´ë‹ í•˜ì§€ ì•Šì•˜ì„ë•Œ
const A = data !== undefined && data !== null ? data.user : undefined // {...}

// ì˜µì…”ë„ ì²´ì´ë‹ ì ìš©
const B = data?.user // {...}

const userName = data?.user.getName?.() // song
const useAge = data?.user.age?.[0] // undefined
```

### Another Example

```js
const a = {
    b: {
        c: 0
    }
}

console.log(a.d.c)
// Uncaught TypeError: Cannot read property 'c' of undefined
// aì•ˆì— d undefined ì´ë¯€ë¡œ  c ì†ì„±ì„ ì½ìœ¼ë ¤ê³  í•˜ë©´ ì—ëŸ¬ ë°œìƒ
â€‹
// ì˜µì…”ë„ ì²´ì´ë‹ í•˜ì§€ ì•Šì•˜ì„ë•Œ
console.log(a.d && a.d.c)
â€‹
// ì˜µì…”ë„ ì²´ì´ë‹ ì ìš©
console.log(a.d?.c)
// ê²°ê³¼: undefined
```

## Nullish coalescing Operator

ì¦‰ ë³‘í•© ì—°ì‚°ì(??)Nullish coalescing Operator(??) ì…ë‹ˆë‹¤.

### What?

ì™¼ìª½ í”¼ì—°ì‚°ì ê°’ì´ nullì´ë‚˜ undefinedì¼ ê²½ìš° ì˜¤ë¥¸ìª½ í”¼ì—°ì‚°ìë¥¼ ë°˜í™˜í•˜ê³  ê·¸ë ‡ì§€ ì•Šìœ¼ë©´ ì™¼ìª½ í”¼ì—°ì‚°ìë¥¼ ë°˜í™˜í•˜ëŠ” ì—°ì‚°ìì…ë‹ˆë‹¤.

```ts
const data = {
  name: 'song',
  bio: '',
}

const A = data.bio ?? 'default value' // ''

const B =
  data.bio !== undefined && data.bio !== null ? data.bio : 'default value' // ''

const C = data.desc || 'default value' // 'default value'
```

## Dynamic import

ëª¨ë“ˆ import () í• ë•Œ ë™ì ìœ¼ë¡œ í•  ìˆ˜ ìˆëŠ” êµ¬ë¬¸ ì…ë‹ˆë‹¤.
import()êµ¬ë¬¸ì€ Promiseê°ì²´ë¥¼ ë°˜í™˜í•˜ê¸° ë•Œë¬¸ì— async/awaitì´ë‚˜ then/catchë¥¼ ì‚¬ìš©í•´ì„œ ë¹„ë™ê¸°ì²˜ë¦¬

ì•„ë˜ì™€ ê°™ì€ ì´ì ì„ ì–»ì„ìˆ˜ê°€ ìˆë‹¤.

- ì‚¬ìš©ì ì–¸ì–´ë¥¼ ëª¨ë‘ë¡œë“œí•˜ëŠ” ëŒ€ì‹ ë¡œë“œ
- ì• í”Œë¦¬ì¼€ì´ì…˜ ê²½ë¡œì˜ ì§€ì—° ë¡œë”© (ì„±ëŠ¥ í–¥ìƒ)
- ëª¨ë“ˆì„ ì°¾ì„ ìˆ˜ì—†ëŠ” ê²½ìš° ì¥ì•  ì²˜ë¦¬ ê°€ëŠ¥

```js
// Using callback
import('/module.js')
  .then((module) => {
  });

//  async / await ì‚¬ìš©ì‹œ
async function () {
  let module = await import('/modules.js');
}
```

## BigInt

JSì—ì„œ í°ìˆ«ìë¥¼ ì·¨ê¸‰ í‘œí˜„í•˜ëŠ”ë° ì–´ë ¤ì›€ì´ ë§ì•˜ìŠµë‹ˆë‹¤. ê·¸ë˜ì„œ BigIntë¼ëŠ” ê°ì²´ê°€ ë„ì…ì´ ë˜ì—ˆìŠµë‹ˆë‹¤.
BigIntëŠ” 2^53 ë³´ë‹¤ í° ì •ìˆ˜ë¥¼ ì·¨ê¸‰í• ìˆ˜ê°€ ìˆìŠµë‹ˆë‹¤.
ì‚¬ìš©ë²•ì€ ìˆ«ìë’¤ì— `n`ì„ ë¶™ì—¬ ì‚¬ìš©ì„ í•˜ë©´ ë©ë‹ˆë‹¤.

### BigInt ë¯¸ì‚¬ìš©

```js
const max = Number.MAX_SAFE_INTEGER

console.log(max) // 9007199254740991

console.log(max + 1) // 9007199254740992
console.log(max + 2) // 9007199254740992
console.log(max + 3) // 9007199254740994
console.log(Math.pow(2, 53) == Math.pow(2, 53) + 1) // true
```

### BigInt ì‚¬ìš©

```js
const bigNum = 100000000000000000000000000000n

console.log(bigNum * 2n) // 200000000000000000000000000000n
```

> BigIntëŠ” BigIntë¼ë¦¬ ê³„ì‚°ì„ í•´ì•¼í•˜ë©°, Big + Int ì´ê¸°ë•Œë¬¸ì— ì†Œìˆ˜ì ì€ í‘œí˜„ì„ ëª»í•©ë‹ˆë‹¤.

## String.prototype.matchAll

matchAllì€ ì‰½ê²Œ ì„¤ëª…í•˜ìë©´ ì •ê·œì‹í‘œí˜„ì´ë¼ê³  ìƒê°í•˜ë©´ ì¢‹ì„ê±° ê°™ìŠµë‹ˆë‹¤.
RegExp.prototype.exec ë©”ì„œë“œì™€ ìœ ì‚¬í•˜ê²Œ ë™ì‘í•©ë‹ˆë‹¤.

matchAll ë¬¸ìì—´ì—ì„œ ì¼ì¹˜í•˜ëŠ” ì •ê·œí‘œí˜„ì‹ì„ iterator í˜•ì‹ìœ¼ë¡œ ë°˜í™˜í•©ë‹ˆë‹¤

```js
// ì¼ë°˜ ì •ê·œì‹
const regexp = /g(ro)(up(\d?))/g
const groups = 'group1group2group3'
groups.match(regexp)
//(3) ["group1", "group2", "group3"]
//0: "group1"
//1: "group2"
//2: "group3"
```

```js
//matchAll
const regexp = /g(ro)(up(\d?))/g
const someString = 'group1group2group3'
const array = [...someString.matchAll(regexp)]
array
//(3) [Array(4), Array(4), Array(4)]
//0: (4) ["group1", "ro", "up1", "1", index: 0, input: //"group1group2group3", groups: undefined]
//1: (4) ["group2", "ro", "up2", "2", index: 6, input: //"group1group2group3", groups: undefined]
//2: (4) ["group3", "ro", "up3", "3", index: 12, input: //"group1group2group3", groups: undefined]
//length: 3
```

> ì£¼ì˜!!! ì •ê·œí‘œí˜„ì‹ ë’¤ì— /gë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šìœ¼ë©´ Uncaught TypeError: String.prototype.matchAll called with a non-global RegExp argument ERROR

## References

> - [https://github.com/tc39/proposals/blob/master/finished-proposals.md](https://github.com/tc39/proposals/blob/master/finished-proposals.md)
> - [https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/matchAll](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/matchAll)
> - [https://dev.to/carlillo/es2020-features-in-simple-examples-1513](https://dev.to/carlillo/es2020-features-in-simple-examples-1513)

### ğŸ™ğŸ»ê°ì‚¬í•©ë‹ˆë‹¤.
